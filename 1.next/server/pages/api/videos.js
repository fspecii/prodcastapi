"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/videos";
exports.ids = ["pages/api/videos"];
exports.modules = {

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "sqlite":
/*!*************************!*\
  !*** external "sqlite" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("sqlite");

/***/ }),

/***/ "sqlite3":
/*!**************************!*\
  !*** external "sqlite3" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("sqlite3");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cvideos.ts&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cvideos.ts&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_videos_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\videos.ts */ \"(api)/./pages/api/videos.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_videos_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_videos_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/videos\",\n        pathname: \"/api/videos\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_videos_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnZpZGVvcyZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTVDYXBpJTVDdmlkZW9zLnRzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ29EO0FBQ3BEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcG9kYXBpLz9mOTc5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcdmlkZW9zLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvdmlkZW9zXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvdmlkZW9zXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cvideos.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/db.ts":
/*!*******************!*\
  !*** ./lib/db.ts ***!
  \*******************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addVideo: () => (/* binding */ addVideo),\n/* harmony export */   deleteVideo: () => (/* binding */ deleteVideo),\n/* harmony export */   getVideoTranscriptionPath: () => (/* binding */ getVideoTranscriptionPath),\n/* harmony export */   getVideos: () => (/* binding */ getVideos),\n/* harmony export */   updateVideoMetadata: () => (/* binding */ updateVideoMetadata),\n/* harmony export */   updateVideoStatus: () => (/* binding */ updateVideoStatus)\n/* harmony export */ });\n/* module decorator */ module = __webpack_require__.hmd(module);\nconst sqlite3 = __webpack_require__(/*! sqlite3 */ \"sqlite3\");\nconst { open } = __webpack_require__(/*! sqlite */ \"sqlite\");\nlet db;\nasync function openDb() {\n    if (!db) {\n        db = await open({\n            filename: \"./myvideos.sqlite\",\n            driver: sqlite3.Database\n        });\n        await db.exec(`\n      CREATE TABLE IF NOT EXISTS videos (\n        id INTEGER PRIMARY KEY AUTOINCREMENT,\n        filename TEXT,\n        transcription_path TEXT,\n        created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n        published BOOLEAN DEFAULT FALSE,\n        scheduled BOOLEAN DEFAULT FALSE,\n        status TEXT DEFAULT 'processing',\n        video_url TEXT,\n        title TEXT,\n        description TEXT,\n        scheduled_date TEXT\n      )\n    `);\n        // Add columns if they don't exist\n        const tableInfo = await db.all(\"PRAGMA table_info(videos)\");\n        const columns = [\n            \"title\",\n            \"description\",\n            \"scheduled_date\"\n        ];\n        for (const column of columns){\n            if (!tableInfo.some((col)=>col.name === column)) {\n                await db.exec(`ALTER TABLE videos ADD COLUMN ${column} TEXT`);\n            }\n        }\n    }\n    return db;\n}\nasync function getVideos() {\n    const db = await openDb();\n    return db.all(\"SELECT * FROM videos ORDER BY created_at DESC\");\n}\nasync function addVideo(filename, transcriptionPath, status = \"processing\") {\n    const db = await openDb();\n    return db.run(\"INSERT INTO videos (filename, transcription_path, status) VALUES (?, ?, ?)\", filename, transcriptionPath, status);\n}\nasync function updateVideoMetadata(id, title, description) {\n    const db = await openDb();\n    return db.run(\"UPDATE videos SET title = ?, description = ? WHERE id = ?\", title, description, id);\n}\nasync function updateVideoStatus(id, status, videoUrl, published, scheduled, title, description, scheduledDate) {\n    const db = await openDb();\n    let query = \"UPDATE videos SET\";\n    const params = [];\n    if (status !== undefined) {\n        query += \" status = ?,\";\n        params.push(status);\n    }\n    if (videoUrl !== undefined) {\n        query += \" video_url = ?,\";\n        params.push(videoUrl);\n    }\n    if (published !== undefined) {\n        query += \" published = ?,\";\n        params.push(published);\n    }\n    if (scheduled !== undefined) {\n        query += \" scheduled = ?,\";\n        params.push(scheduled);\n    }\n    if (title !== undefined) {\n        query += \" title = ?,\";\n        params.push(title);\n    }\n    if (description !== undefined) {\n        query += \" description = ?,\";\n        params.push(description);\n    }\n    if (scheduledDate !== undefined) {\n        query += \" scheduled_date = ?,\";\n        params.push(scheduledDate);\n    }\n    // Remove the trailing comma\n    query = query.slice(0, -1);\n    query += \" WHERE id = ?\";\n    params.push(id);\n    return db.run(query, ...params);\n}\nasync function deleteVideo(id) {\n    const db = await openDb();\n    return db.run(\"DELETE FROM videos WHERE id = ?\", id);\n}\nasync function getVideoTranscriptionPath(id) {\n    const db = await openDb();\n    const result = await db.get(\"SELECT transcription_path FROM videos WHERE id = ?\", id);\n    return result ? result.transcription_path : null;\n}\nmodule.exports = {\n    getVideos,\n    addVideo,\n    updateVideoMetadata,\n    updateVideoStatus,\n    deleteVideo,\n    getVideoTranscriptionPath\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNbEMsR0FBR21DLEdBQUcsQ0FBQyxzREFBc0RoQjtJQUNsRixPQUFPZSxTQUFTQSxPQUFPRSxrQkFBa0IsR0FBRztBQUM5QztBQUVBQyxPQUFPQyxPQUFPLEdBQUc7SUFDZnpCO0lBQ0FDO0lBQ0FJO0lBQ0FJO0lBQ0FVO0lBQ0FDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wb2RhcGkvLi9saWIvZGIudHM/MWRmMCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBzcWxpdGUzID0gcmVxdWlyZSgnc3FsaXRlMycpO1xuY29uc3QgeyBvcGVuIH0gPSByZXF1aXJlKCdzcWxpdGUnKTtcblxubGV0IGRiOiBhbnk7XG5cbmFzeW5jIGZ1bmN0aW9uIG9wZW5EYigpIHtcbiAgaWYgKCFkYikge1xuICAgIGRiID0gYXdhaXQgb3Blbih7XG4gICAgICBmaWxlbmFtZTogJy4vbXl2aWRlb3Muc3FsaXRlJyxcbiAgICAgIGRyaXZlcjogc3FsaXRlMy5EYXRhYmFzZVxuICAgIH0pO1xuICAgIGF3YWl0IGRiLmV4ZWMoYFxuICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdmlkZW9zIChcbiAgICAgICAgaWQgSU5URUdFUiBQUklNQVJZIEtFWSBBVVRPSU5DUkVNRU5ULFxuICAgICAgICBmaWxlbmFtZSBURVhULFxuICAgICAgICB0cmFuc2NyaXB0aW9uX3BhdGggVEVYVCxcbiAgICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLFxuICAgICAgICBwdWJsaXNoZWQgQk9PTEVBTiBERUZBVUxUIEZBTFNFLFxuICAgICAgICBzY2hlZHVsZWQgQk9PTEVBTiBERUZBVUxUIEZBTFNFLFxuICAgICAgICBzdGF0dXMgVEVYVCBERUZBVUxUICdwcm9jZXNzaW5nJyxcbiAgICAgICAgdmlkZW9fdXJsIFRFWFQsXG4gICAgICAgIHRpdGxlIFRFWFQsXG4gICAgICAgIGRlc2NyaXB0aW9uIFRFWFQsXG4gICAgICAgIHNjaGVkdWxlZF9kYXRlIFRFWFRcbiAgICAgIClcbiAgICBgKTtcbiAgICBcbiAgICAvLyBBZGQgY29sdW1ucyBpZiB0aGV5IGRvbid0IGV4aXN0XG4gICAgY29uc3QgdGFibGVJbmZvID0gYXdhaXQgZGIuYWxsKFwiUFJBR01BIHRhYmxlX2luZm8odmlkZW9zKVwiKTtcbiAgICBjb25zdCBjb2x1bW5zID0gWyd0aXRsZScsICdkZXNjcmlwdGlvbicsICdzY2hlZHVsZWRfZGF0ZSddO1xuICAgIGZvciAoY29uc3QgY29sdW1uIG9mIGNvbHVtbnMpIHtcbiAgICAgIGlmICghdGFibGVJbmZvLnNvbWUoKGNvbDogeyBuYW1lOiBzdHJpbmcgfSkgPT4gY29sLm5hbWUgPT09IGNvbHVtbikpIHtcbiAgICAgICAgYXdhaXQgZGIuZXhlYyhgQUxURVIgVEFCTEUgdmlkZW9zIEFERCBDT0xVTU4gJHtjb2x1bW59IFRFWFRgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGRiO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VmlkZW9zKCkge1xuICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EYigpO1xuICByZXR1cm4gZGIuYWxsKCdTRUxFQ1QgKiBGUk9NIHZpZGVvcyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MnKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFZpZGVvKGZpbGVuYW1lOiBzdHJpbmcsIHRyYW5zY3JpcHRpb25QYXRoOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nID0gJ3Byb2Nlc3NpbmcnKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRiKCk7XG4gIHJldHVybiBkYi5ydW4oJ0lOU0VSVCBJTlRPIHZpZGVvcyAoZmlsZW5hbWUsIHRyYW5zY3JpcHRpb25fcGF0aCwgc3RhdHVzKSBWQUxVRVMgKD8sID8sID8pJywgZmlsZW5hbWUsIHRyYW5zY3JpcHRpb25QYXRoLCBzdGF0dXMpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmlkZW9NZXRhZGF0YShcbiAgaWQ6IG51bWJlcixcbiAgdGl0bGU6IHN0cmluZyxcbiAgZGVzY3JpcHRpb246IHN0cmluZ1xuKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRiKCk7XG4gIHJldHVybiBkYi5ydW4oJ1VQREFURSB2aWRlb3MgU0VUIHRpdGxlID0gPywgZGVzY3JpcHRpb24gPSA/IFdIRVJFIGlkID0gPycsIHRpdGxlLCBkZXNjcmlwdGlvbiwgaWQpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVmlkZW9TdGF0dXMoXG4gIGlkOiBudW1iZXIsIFxuICBzdGF0dXM/OiBzdHJpbmcsIFxuICB2aWRlb1VybD86IHN0cmluZyB8IG51bGwsXG4gIHB1Ymxpc2hlZD86IGJvb2xlYW4sXG4gIHNjaGVkdWxlZD86IGJvb2xlYW4sXG4gIHRpdGxlPzogc3RyaW5nLFxuICBkZXNjcmlwdGlvbj86IHN0cmluZyxcbiAgc2NoZWR1bGVkRGF0ZT86IHN0cmluZ1xuKSB7XG4gIGNvbnN0IGRiID0gYXdhaXQgb3BlbkRiKCk7XG4gIGxldCBxdWVyeSA9ICdVUERBVEUgdmlkZW9zIFNFVCc7XG4gIGNvbnN0IHBhcmFtcyA9IFtdO1xuXG4gIGlmIChzdGF0dXMgIT09IHVuZGVmaW5lZCkge1xuICAgIHF1ZXJ5ICs9ICcgc3RhdHVzID0gPywnO1xuICAgIHBhcmFtcy5wdXNoKHN0YXR1cyk7XG4gIH1cbiAgaWYgKHZpZGVvVXJsICE9PSB1bmRlZmluZWQpIHtcbiAgICBxdWVyeSArPSAnIHZpZGVvX3VybCA9ID8sJztcbiAgICBwYXJhbXMucHVzaCh2aWRlb1VybCk7XG4gIH1cbiAgaWYgKHB1Ymxpc2hlZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcXVlcnkgKz0gJyBwdWJsaXNoZWQgPSA/LCc7XG4gICAgcGFyYW1zLnB1c2gocHVibGlzaGVkKTtcbiAgfVxuICBpZiAoc2NoZWR1bGVkICE9PSB1bmRlZmluZWQpIHtcbiAgICBxdWVyeSArPSAnIHNjaGVkdWxlZCA9ID8sJztcbiAgICBwYXJhbXMucHVzaChzY2hlZHVsZWQpO1xuICB9XG4gIGlmICh0aXRsZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcXVlcnkgKz0gJyB0aXRsZSA9ID8sJztcbiAgICBwYXJhbXMucHVzaCh0aXRsZSk7XG4gIH1cbiAgaWYgKGRlc2NyaXB0aW9uICE9PSB1bmRlZmluZWQpIHtcbiAgICBxdWVyeSArPSAnIGRlc2NyaXB0aW9uID0gPywnO1xuICAgIHBhcmFtcy5wdXNoKGRlc2NyaXB0aW9uKTtcbiAgfVxuICBpZiAoc2NoZWR1bGVkRGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcXVlcnkgKz0gJyBzY2hlZHVsZWRfZGF0ZSA9ID8sJztcbiAgICBwYXJhbXMucHVzaChzY2hlZHVsZWREYXRlKTtcbiAgfVxuXG4gIC8vIFJlbW92ZSB0aGUgdHJhaWxpbmcgY29tbWFcbiAgcXVlcnkgPSBxdWVyeS5zbGljZSgwLCAtMSk7XG5cbiAgcXVlcnkgKz0gJyBXSEVSRSBpZCA9ID8nO1xuICBwYXJhbXMucHVzaChpZCk7XG5cbiAgcmV0dXJuIGRiLnJ1bihxdWVyeSwgLi4ucGFyYW1zKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVZpZGVvKGlkOiBudW1iZXIpIHtcbiAgY29uc3QgZGIgPSBhd2FpdCBvcGVuRGIoKTtcbiAgcmV0dXJuIGRiLnJ1bignREVMRVRFIEZST00gdmlkZW9zIFdIRVJFIGlkID0gPycsIGlkKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFZpZGVvVHJhbnNjcmlwdGlvblBhdGgoaWQ6IG51bWJlcikge1xuICBjb25zdCBkYiA9IGF3YWl0IG9wZW5EYigpO1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBkYi5nZXQoJ1NFTEVDVCB0cmFuc2NyaXB0aW9uX3BhdGggRlJPTSB2aWRlb3MgV0hFUkUgaWQgPSA/JywgaWQpO1xuICByZXR1cm4gcmVzdWx0ID8gcmVzdWx0LnRyYW5zY3JpcHRpb25fcGF0aCA6IG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBnZXRWaWRlb3MsXG4gIGFkZFZpZGVvLFxuICB1cGRhdGVWaWRlb01ldGFkYXRhLFxuICB1cGRhdGVWaWRlb1N0YXR1cyxcbiAgZGVsZXRlVmlkZW8sXG4gIGdldFZpZGVvVHJhbnNjcmlwdGlvblBhdGhcbn07Il0sIm5hbWVzIjpbInNxbGl0ZTMiLCJyZXF1aXJlIiwib3BlbiIsImRiIiwib3BlbkRiIiwiZmlsZW5hbWUiLCJkcml2ZXIiLCJEYXRhYmFzZSIsImV4ZWMiLCJ0YWJsZUluZm8iLCJhbGwiLCJjb2x1bW5zIiwiY29sdW1uIiwic29tZSIsImNvbCIsIm5hbWUiLCJnZXRWaWRlb3MiLCJhZGRWaWRlbyIsInRyYW5zY3JpcHRpb25QYXRoIiwic3RhdHVzIiwicnVuIiwidXBkYXRlVmlkZW9NZXRhZGF0YSIsImlkIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVwZGF0ZVZpZGVvU3RhdHVzIiwidmlkZW9VcmwiLCJwdWJsaXNoZWQiLCJzY2hlZHVsZWQiLCJzY2hlZHVsZWREYXRlIiwicXVlcnkiLCJwYXJhbXMiLCJ1bmRlZmluZWQiLCJwdXNoIiwic2xpY2UiLCJkZWxldGVWaWRlbyIsImdldFZpZGVvVHJhbnNjcmlwdGlvblBhdGgiLCJyZXN1bHQiLCJnZXQiLCJ0cmFuc2NyaXB0aW9uX3BhdGgiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/db.ts\n");

/***/ }),

/***/ "(api)/./pages/api/videos.ts":
/*!*****************************!*\
  !*** ./pages/api/videos.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/db */ \"(api)/./lib/db.ts\");\n\n\n\nasync function handler(req, res) {\n    const videosDir = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"public\", \"videos\");\n    if (req.method === \"GET\") {\n        try {\n            const { published, scheduled } = req.query;\n            const videos = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.getVideos)();\n            if (published === \"true\") {\n                const publishedVideos = videos.filter((video)=>video.published && video.status === \"published\");\n                res.status(200).json(publishedVideos);\n            } else if (scheduled === \"true\") {\n                const scheduledVideos = videos.filter((video)=>video.scheduled && video.status === \"scheduled\");\n                res.status(200).json(scheduledVideos);\n            } else {\n                res.status(200).json(videos);\n            }\n        } catch (error) {\n            res.status(500).json({\n                error: \"Error fetching videos\"\n            });\n        }\n    } else if (req.method === \"DELETE\") {\n        const { id, filename } = req.query;\n        if (typeof id !== \"string\" || typeof filename !== \"string\") {\n            return res.status(400).json({\n                error: \"Invalid request\"\n            });\n        }\n        try {\n            await (0,_lib_db__WEBPACK_IMPORTED_MODULE_2__.deleteVideo)(parseInt(id));\n            const filePath = path__WEBPACK_IMPORTED_MODULE_1___default().join(videosDir, filename);\n            if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(filePath)) {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().unlinkSync(filePath);\n            }\n            res.status(200).json({\n                message: \"Video deleted successfully\"\n            });\n        } catch (error) {\n            res.status(500).json({\n                error: \"Error deleting video\"\n            });\n        }\n    } else {\n        res.setHeader(\"Allow\", [\n            \"GET\",\n            \"DELETE\"\n        ]);\n        res.status(405).end(`Method ${req.method} Not Allowed`);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdmlkZW9zLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNvQjtBQUNJO0FBQzhCO0FBRXZDLGVBQWVJLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLE1BQU1DLFlBQVlOLGdEQUFTLENBQUNRLFFBQVFDLEdBQUcsSUFBSSxVQUFVO0lBRXJELElBQUlMLElBQUlNLE1BQU0sS0FBSyxPQUFPO1FBQ3hCLElBQUk7WUFDRixNQUFNLEVBQUVDLFNBQVMsRUFBRUMsU0FBUyxFQUFFLEdBQUdSLElBQUlTLEtBQUs7WUFDMUMsTUFBTUMsU0FBUyxNQUFNYixrREFBU0E7WUFDOUIsSUFBSVUsY0FBYyxRQUFRO2dCQUN4QixNQUFNSSxrQkFBa0JELE9BQU9FLE1BQU0sQ0FBQ0MsQ0FBQUEsUUFBU0EsTUFBTU4sU0FBUyxJQUFJTSxNQUFNQyxNQUFNLEtBQUs7Z0JBQ25GYixJQUFJYSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDSjtZQUN2QixPQUFPLElBQUlILGNBQWMsUUFBUTtnQkFDL0IsTUFBTVEsa0JBQWtCTixPQUFPRSxNQUFNLENBQUNDLENBQUFBLFFBQVNBLE1BQU1MLFNBQVMsSUFBSUssTUFBTUMsTUFBTSxLQUFLO2dCQUNuRmIsSUFBSWEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0M7WUFDdkIsT0FBTztnQkFDTGYsSUFBSWEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQ0w7WUFDdkI7UUFDRixFQUFFLE9BQU9PLE9BQU87WUFDZGhCLElBQUlhLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVFLE9BQU87WUFBd0I7UUFDeEQ7SUFDRixPQUFPLElBQUlqQixJQUFJTSxNQUFNLEtBQUssVUFBVTtRQUNsQyxNQUFNLEVBQUVZLEVBQUUsRUFBRUMsUUFBUSxFQUFFLEdBQUduQixJQUFJUyxLQUFLO1FBQ2xDLElBQUksT0FBT1MsT0FBTyxZQUFZLE9BQU9DLGFBQWEsVUFBVTtZQUMxRCxPQUFPbEIsSUFBSWEsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUUsT0FBTztZQUFrQjtRQUN6RDtRQUNBLElBQUk7WUFDRixNQUFNbkIsb0RBQVdBLENBQUNzQixTQUFTRjtZQUMzQixNQUFNRyxXQUFXekIsZ0RBQVMsQ0FBQ00sV0FBV2lCO1lBQ3RDLElBQUl4QixvREFBYSxDQUFDMEIsV0FBVztnQkFDM0IxQixvREFBYSxDQUFDMEI7WUFDaEI7WUFDQXBCLElBQUlhLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVTLFNBQVM7WUFBNkI7UUFDL0QsRUFBRSxPQUFPUCxPQUFPO1lBQ2RoQixJQUFJYSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFRSxPQUFPO1lBQXVCO1FBQ3ZEO0lBQ0YsT0FBTztRQUNMaEIsSUFBSXdCLFNBQVMsQ0FBQyxTQUFTO1lBQUM7WUFBTztTQUFTO1FBQ3hDeEIsSUFBSWEsTUFBTSxDQUFDLEtBQUtZLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRTFCLElBQUlNLE1BQU0sQ0FBQyxZQUFZLENBQUM7SUFDeEQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3BvZGFwaS8uL3BhZ2VzL2FwaS92aWRlb3MudHM/NzU2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBnZXRWaWRlb3MsIGRlbGV0ZVZpZGVvIH0gZnJvbSAnLi4vLi4vbGliL2RiJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBjb25zdCB2aWRlb3NEaXIgPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgJ3B1YmxpYycsICd2aWRlb3MnKTtcblxuICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBwdWJsaXNoZWQsIHNjaGVkdWxlZCB9ID0gcmVxLnF1ZXJ5O1xuICAgICAgY29uc3QgdmlkZW9zID0gYXdhaXQgZ2V0VmlkZW9zKCk7XG4gICAgICBpZiAocHVibGlzaGVkID09PSAndHJ1ZScpIHtcbiAgICAgICAgY29uc3QgcHVibGlzaGVkVmlkZW9zID0gdmlkZW9zLmZpbHRlcih2aWRlbyA9PiB2aWRlby5wdWJsaXNoZWQgJiYgdmlkZW8uc3RhdHVzID09PSAncHVibGlzaGVkJyk7XG4gICAgICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHB1Ymxpc2hlZFZpZGVvcyk7XG4gICAgICB9IGVsc2UgaWYgKHNjaGVkdWxlZCA9PT0gJ3RydWUnKSB7XG4gICAgICAgIGNvbnN0IHNjaGVkdWxlZFZpZGVvcyA9IHZpZGVvcy5maWx0ZXIodmlkZW8gPT4gdmlkZW8uc2NoZWR1bGVkICYmIHZpZGVvLnN0YXR1cyA9PT0gJ3NjaGVkdWxlZCcpO1xuICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihzY2hlZHVsZWRWaWRlb3MpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24odmlkZW9zKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0Vycm9yIGZldGNoaW5nIHZpZGVvcycgfSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHJlcS5tZXRob2QgPT09ICdERUxFVEUnKSB7XG4gICAgY29uc3QgeyBpZCwgZmlsZW5hbWUgfSA9IHJlcS5xdWVyeTtcbiAgICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJyB8fCB0eXBlb2YgZmlsZW5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLmpzb24oeyBlcnJvcjogJ0ludmFsaWQgcmVxdWVzdCcgfSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBhd2FpdCBkZWxldGVWaWRlbyhwYXJzZUludChpZCkpO1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXRoLmpvaW4odmlkZW9zRGlyLCBmaWxlbmFtZSk7XG4gICAgICBpZiAoZnMuZXhpc3RzU3luYyhmaWxlUGF0aCkpIHtcbiAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XG4gICAgICB9XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7IG1lc3NhZ2U6ICdWaWRlbyBkZWxldGVkIHN1Y2Nlc3NmdWxseScgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdFcnJvciBkZWxldGluZyB2aWRlbycgfSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlcy5zZXRIZWFkZXIoJ0FsbG93JywgWydHRVQnLCAnREVMRVRFJ10pO1xuICAgIHJlcy5zdGF0dXMoNDA1KS5lbmQoYE1ldGhvZCAke3JlcS5tZXRob2R9IE5vdCBBbGxvd2VkYCk7XG4gIH1cbn0iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiZ2V0VmlkZW9zIiwiZGVsZXRlVmlkZW8iLCJoYW5kbGVyIiwicmVxIiwicmVzIiwidmlkZW9zRGlyIiwiam9pbiIsInByb2Nlc3MiLCJjd2QiLCJtZXRob2QiLCJwdWJsaXNoZWQiLCJzY2hlZHVsZWQiLCJxdWVyeSIsInZpZGVvcyIsInB1Ymxpc2hlZFZpZGVvcyIsImZpbHRlciIsInZpZGVvIiwic3RhdHVzIiwianNvbiIsInNjaGVkdWxlZFZpZGVvcyIsImVycm9yIiwiaWQiLCJmaWxlbmFtZSIsInBhcnNlSW50IiwiZmlsZVBhdGgiLCJleGlzdHNTeW5jIiwidW5saW5rU3luYyIsIm1lc3NhZ2UiLCJzZXRIZWFkZXIiLCJlbmQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/videos.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fvideos&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cvideos.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();